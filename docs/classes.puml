@startuml magisk
RootFSBase <|-- RootFSInit
MagiskInit <|-- RootFSBase
BaseInit <|-- MagiskInit

class BaseInit{
    # cmdline* cmd
    # char** argv

    # void exec_init(const char *init = "/init")
    # virtual void cleanup()
    + virtual void start() = 0
}

class MagiskInit{
    # bool mnt_system = false
	# bool mnt_vendor = false
	# bool mnt_product = false
	# bool mnt_odm = false

    # virtual void early_mount() = 0;
	# bool read_dt_fstab(const char *name, char *partname, char *fstype);
	# bool patch_sepolicy(const char *file = "/sepolicy");
	# void cleanup() override;
}

class RootFSBase{
    # int root = -1;
	# virtual void setup_rootfs();
    + void start() override
}

class RootFSInit{
    # void early_mount() override;
}

@enduml
